<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Browse Care Providers - Crossing Sunsets‚Ñ¢</title>

  <!-- Google Translate -->
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,es,zh-CN,fr,de,it,pt,ru,ja,ko,ar',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
.contact-liaison-card {
  max-width: 900px;
  margin: 2rem auto 1.5rem auto;
  padding: 0 1rem;
}

.contact-liaison-inner {
  background: #ffffff;
  border-radius: 16px;
  padding: 1.5rem 2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.5rem;

  border: 2px solid #00b4d8;            /* teal outline */
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  position: relative;

  /* soft pulsing glow */
  animation: contactGlow 3s ease-in-out infinite;
}

/* lotus icon on the left */
.contact-liaison-icon {
  flex-shrink: 0;
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: linear-gradient(145deg, #00b4d8, #48cae4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.9rem;
  color: #ffffff;
  box-shadow: 0 6px 16px rgba(0, 150, 199, 0.6);
}

.contact-liaison-text h3 {
  font-size: 1.25rem;
  margin-bottom: 0.35rem;
  color: #023e8a;
}

.contact-liaison-text p {
  margin-bottom: 0.25rem;
  color: #334155;
}

.contact-liaison-phone a {
  color: #00b4d8;
  text-decoration: none;
  font-weight: 600;
}

.contact-liaison-phone a:hover {
  text-decoration: underline;
}

.contact-liaison-action {
  flex-shrink: 0;
}

.contact-liaison-button {
  display: inline-block;
  padding: 0.75rem 1.6rem;
  border-radius: 999px;
  background: linear-gradient(135deg, #00b4d8, #0096c7);
  color: #ffffff;
  font-weight: 600;
  text-decoration: none;
  font-size: 0.95rem;
  box-shadow: 0 6px 18px rgba(0, 150, 199, 0.4);
  transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
}

.contact-liaison-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0, 150, 199, 0.5);
  opacity: 0.95;
}

.contact-liaison-button:active {
  transform: translateY(0);
  box-shadow: 0 4px 12px rgba(0, 150, 199, 0.35);
}

/* soft pulsing glow animation */
@keyframes contactGlow {
  0% {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  }
  50% {
    box-shadow: 0 0 25px rgba(0, 180, 216, 0.45);
  }
  100% {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  }
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .contact-liaison-inner {
    flex-direction: row;
    align-items: flex-start;
    gap: 1rem;
  }

  .contact-liaison-button {
    width: 100%;
    text-align: center;
  }

  .contact-liaison-action {
    width: 100%;
  }
}

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height:1.6; color:#333; background:#f5f7fa; }
    #google_translate_element { position: fixed; top:70px; right:10px; z-index:9999; background:#fff; padding:5px 10px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,.2); }

    nav { background: linear-gradient(135deg, #00bcd4 0%, #0097a7 100%); padding:1rem 2rem; box-shadow:0 2px 10px rgba(0,0,0,.1); position:sticky; top:0; z-index:1000; }
    nav .container { max-width:1200px; margin:0 auto; display:flex; justify-content:space-between; align-items:center; }
    .logo-section { display:flex; align-items:center; gap:15px; }
    .logo-section img { width:50px; height:50px; border-radius:10px; }
    .logo-section h1 { color:#fff; font-size:24px; }
    nav ul { list-style:none; display:flex; gap:2rem; }
    nav a { color:#fff; text-decoration:none; font-weight:500; transition:opacity .3s; }
    nav a:hover { opacity:.8; }

    .main-content { max-width:1200px; margin:40px auto; padding:0 20px; }
    .page-header { text-align:center; margin-bottom:40px; }
    .page-header h2 { color:#2c3e50; font-size:2.5rem; margin-bottom:10px; }
    .page-header p { color:#7f8c8d; font-size:1.1rem; }

    .bed-stats-banner { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; margin-bottom:30px; padding:20px; background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.08); }
    .stat-item { text-align:center; padding:15px; border-right:1px solid #E0E0E0; }
    .stat-item:last-child { border-right:none; }
    .stat-number { display:block; font-size:32px; font-weight:700; color:#00ACC1; margin-bottom:5px; }
    .stat-label { display:block; font-size:14px; color:#666; text-transform:uppercase; letter-spacing:.5px; }

    .filter-section { background:#fff; padding:25px; border-radius:15px; box-shadow:0 5px 20px rgba(0,0,0,.1); margin-bottom:20px; }
    .filter-label { color:#2c3e50; font-weight:600; margin-bottom:15px; display:block; font-size:1.1rem; }
    .filter-buttons { display:flex; gap:10px; flex-wrap:wrap; }
    .filter-btn { padding:10px 20px; border:2px solid #00bcd4; background:#fff; color:#00bcd4; border-radius:25px; cursor:pointer; font-weight:600; transition:all .3s; font-size:14px; }
    .filter-btn:hover { background:#e0f7fa; }
    .filter-btn.active { background:#00bcd4; color:#fff; }

    .search-box { background:#fff; padding:30px; border-radius:15px; box-shadow:0 5px 20px rgba(0,0,0,.1); margin-bottom:40px; }
    .search-box input { width:100%; padding:15px; border:2px solid #e0e0e0; border-radius:10px; font-size:16px; transition:border-color .3s; }
    .search-box input:focus { outline:none; border-color:#00bcd4; }

    .providers-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap:30px; }
    .provider-card { background:#fff; border-radius:15px; overflow:hidden; box-shadow:0 5px 20px rgba(0,0,0,.1); transition:transform .3s; }
    .provider-card:hover { transform:translateY(-10px); }
    .provider-header { background:linear-gradient(135deg, #00bcd4 0%, #0097a7 100%); padding:20px; text-align:center; }
    .provider-logo { width:80px; height:80px; border-radius:50%; background:#fff; margin:0 auto 15px; display:flex; align-items:center; justify-content:center; font-size:2.5rem; line-height:1; overflow:hidden; }
    .provider-header h3 { color:#fff; font-size:1.5rem; margin-bottom:5px; }
    .provider-header .location { color:rgba(255,255,255,.9); font-size:.9rem; }
    .provider-body { padding:25px; }

    .provider-type-badge { display:inline-block; background:#e0f7fa; color:#00838f; padding:5px 15px; border-radius:15px; font-size:.85rem; font-weight:600; margin-bottom:15px; }
    .provider-description { color:#666; font-size:.95rem; line-height:1.6; margin-bottom:20px; min-height:60px; }

    .bed-availability { margin:15px 0; padding:12px 16px; background:#E8F5E9; border-radius:8px; display:flex; align-items:center; font-weight:600; color:#2E7D32; font-size:16px; }
    .bed-availability.low { background:#FFF3E0; color:#E65100; }
    .bed-icon { margin-right:10px; font-size:20px; }

    .provider-actions { display:flex; gap:10px; }
    .btn { flex:1; padding:12px; border:none; border-radius:8px; font-weight:600; cursor:pointer; transition:all .3s; text-align:center; text-decoration:none; display:inline-block; }
    .btn-reviews { background:#ff6b35; color:#fff; }
    .btn-reviews:hover { background:#e55a2b; transform:translateY(-2px); }
    .btn-review { background:transparent; color:#00bcd4; border:2px solid #00bcd4; }
    .btn-review:hover { background:#00bcd4; color:#fff; }

    .no-results { text-align:center; padding:60px 20px; background:#fff; border-radius:15px; box-shadow:0 5px 20px rgba(0,0,0,.1); }
    .no-results p { color:#7f8c8d; font-size:1.2rem; }

    footer { background:#2c3e50; color:#fff; padding:40px 20px; text-align:center; margin-top:60px; }
    footer .footer-links { display:flex; justify-content:center; gap:2rem; margin-bottom:20px; flex-wrap:wrap; }
    footer a { color:#fff; text-decoration:none; transition:color .3s; }
    footer a:hover { color:#00bcd4; }
    footer .contact-info { margin-top:20px; font-size:.9rem; }
    footer .contact-info a { color:#00bcd4; }

    @media (max-width:768px) {
      nav ul { flex-direction:column; gap:1rem; }
      .providers-grid { grid-template-columns:1fr; }
      .page-header h2 { font-size:2rem; }
      .filter-buttons { justify-content:center; }
      .bed-stats-banner { grid-template-columns:1fr; }
      .stat-item { border-right:none; border-bottom:1px solid #E0E0E0; }
      .stat-item:last-child { border-bottom:none; }
    }
  </style>
</head>
<body>
  <div id="google_translate_element"></div>

  <nav>
    <div class="container">
      <div class="logo-section">
        <img src="crossing-sunsets-logo.png" alt="Crossing Sunsets Logo"/>
        <h1>Crossing Sunsets‚Ñ¢</h1>
      </div>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="browse-providers.html">Browse Providers</a></li>
        <li><a href="quick-signup.html">Leave a Review</a></li>
      </ul>
    </div>
  </nav>

  <div class="main-content">
    <div class="page-header">
      <h2>Browse Care Providers</h2>
      <p>Find compassionate hospice, palliative care, skilled nursing, boarding homes, and memory care in your area</p>
    </div>
<!-- Contact Christine Bottin Card -->
<section class="contact-liaison-card">
  <div class="contact-liaison-inner">
    <div class="contact-liaison-icon">
      ü™∑
    </div>

    <div class="contact-liaison-text">
      <h3>Need help choosing care?</h3>
      <p>Speak with <strong>Christine Bottin</strong>, Physician Liaison.</p>
      <p class="contact-liaison-phone">
        üìû <strong><a href="tel:+15622199922">(562) 219-9922</a></strong>
      </p>
    </div>

    <div class="contact-liaison-action">
      <a href="tel:+15622199922" class="contact-liaison-button">
        Contact Christine
      </a>
    </div>
  </div>
</section>

    <!-- Always visible live stats -->
    <div id="bed-stats-banner" class="bed-stats-banner">
      <div class="stat-item">
        <span id="bedsAvailableTotal" class="stat-number">0</span>
        <span class="stat-label">Beds Available</span>
      </div>
      <div class="stat-item">
        <span id="facilitiesCount" class="stat-number">0</span>
        <span class="stat-label">Facilities</span>
      </div>
      <div class="stat-item">
        <span id="bedsTotal" class="stat-number">0</span>
        <span class="stat-label">Total Beds</span>
      </div>
    </div>

    <!-- Filters -->
    <div class="filter-section">
      <span class="filter-label">üè• Filter by Type of Care:</span>
      <div class="filter-buttons">
        <button class="filter-btn active" onclick="filterProviders('all', this)">All Providers</button>
        <button class="filter-btn" onclick="filterProviders('hospice', this)">‚òòÔ∏è Hospice</button>
        <button class="filter-btn" onclick="filterProviders('palliative', this)">üíô Palliative Care</button>
        <button class="filter-btn" onclick="filterProviders('skilled-nursing', this)">üè® Skilled Nursing</button>
        <button class="filter-btn" onclick="filterProviders('board-and-care-facilities', this)">üè° Board and Care Facilities</button>
        <button class="filter-btn" onclick="filterProviders('memory-care', this)">üß† Memory Care</button>
      </div>
    </div>

    <div class="search-box">
      <input type="text" id="searchInput" placeholder="üîç Search by city, state, or provider name..." onkeyup="searchProviders()"/>
    </div>

    <div class="providers-grid" id="providersGrid"></div>

    <div id="noResults" class="no-results" style="display:none;">
      <p>No providers found matching your search. Try a different search term or filter.</p>
    </div>
  </div>

  <footer>
    <div class="footer-links">
      <a href="index.html">Home</a>
      <a href="browse-providers.html">Browse Providers</a>
      <a href="choose-plan.html">üîí For Healthcare Providers</a>
      <a href="privacy.html">Privacy</a>
      <a href="mailto:support@crossingsunsets.app">üìß Contact Us</a>
    </div>
    <p>&copy; 2025 Crossing Sunsets‚Ñ¢. All rights reserved.</p>
    <div class="contact-info">
      üí¨ Support: <a href="mailto:support@crossingsunsets.app">support@crossingsunsets.app</a> |
      <a href="mailto:eduardo@crossingsunsets.app">eduardo@crossingsunsets.app</a>
    </div>
  </footer>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyB410YcmXKj09W82ck6tZ2WYhyLdyZWtEQ",
      authDomain: "crossing-sunsets.firebaseapp.com",
      databaseURL: "https://crossing-sunsets-default-rtdb.firebaseio.com",
      projectId: "crossing-sunsets",
      storageBucket: "crossing-sunsets.firebasestorage.app",
      messagingSenderId: "83761464492",
      appId: "1:83761464492:web:9e05d8af5a45fe1ff38b09",
      measurementId: "G-LG8VN0EZB7"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let currentFilter = 'all';

    // Totals for banner (beds only meaningful for SNF; still totals all for now)
    const totalsByCategory = {
      all:{facilities:0,available:0,total:0},
      'skilled-nursing':{facilities:0,available:0,total:0},
      hospice:{facilities:0,available:0,total:0},
      palliative:{facilities:0,available:0,total:0},
      'board-and-care-facilities':{facilities:0,available:0,total:0},
      'memory-care':{facilities:0,available:0,total:0}
    };
    function resetTotals(){Object.keys(totalsByCategory).forEach(k=>totalsByCategory[k]={facilities:0,available:0,total:0});}
    function bumpTotals(cat,a,t){
      a=Number(a||0); t=Number(t||0);
      totalsByCategory[cat].facilities++; totalsByCategory.all.facilities++;
      if(Number.isFinite(a)){totalsByCategory[cat].available+=a; totalsByCategory.all.available+=a;}
      if(Number.isFinite(t)){totalsByCategory[cat].total+=t; totalsByCategory.all.total+=t;}
    }
    function updateBannerFor(cat){
      const t=totalsByCategory[cat]||totalsByCategory.all;
      document.getElementById('bedsAvailableTotal').textContent=t.available;
      document.getElementById('facilitiesCount').textContent=t.facilities;
      document.getElementById('bedsTotal').textContent=t.total;
    }

    function filterProviders(category, btnEl){
      currentFilter=category;
      document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
      if(btnEl)btnEl.classList.add('active');

      const cards=document.querySelectorAll('.provider-card');
      let visible=0;
      cards.forEach(c=>{
        const cat=c.getAttribute('data-category');
        if(category==='all'||cat===category){c.style.display='block';visible++;}
        else c.style.display='none';
      });
      document.getElementById('noResults').style.display=(visible===0)?'block':'none';
      updateBannerFor(currentFilter);
    }

    function searchProviders(){
      const term=(document.getElementById('searchInput').value||'').toLowerCase();
      const cards=document.querySelectorAll('.provider-card');
      let visible=0;
      cards.forEach(card=>{
        const name=(card.getAttribute('data-name')||'').toLowerCase();
        const loc=(card.getAttribute('data-location')||'').toLowerCase();
        const cat=card.getAttribute('data-category');
        const matchFilter=(currentFilter==='all'||cat===currentFilter);
        const matchSearch=(name.includes(term)||loc.includes(term));
        if(matchFilter&&matchSearch){card.style.display='block';visible++;}
        else card.style.display='none';
      });
      document.getElementById('noResults').style.display=(visible===0)?'block':'none';
    }

    // Normalize providerType to our categories
    function normalizeCategory(p){
      const raw=(p.providerType || p.careType || p.serviceType || '').toLowerCase();
      if(raw.includes('skilled'))return 'skilled-nursing';
      if(raw.includes('memory'))return 'memory-care';
      if(raw.includes('board'))return 'board-and-care-facilities';
      if(raw.includes('palliative'))return 'palliative';
      return 'hospice';
    }

    // Shamrock ONLY for AllPeace Care Hospice, dove for other hospices
    function providerIsAllPeace(name=''){ return /\ballpeace care hospice\b/i.test(name); }
    function getCategoryIcon(category, providerName='') {
      if (providerIsAllPeace(providerName)) return '‚òòÔ∏è';
      const map = { 'hospice':'üïäÔ∏è','skilled-nursing':'üè®','memory-care':'üß†','board-and-care-facilities':'üè°','palliative':'üíô' };
      return map[category] || 'üè•';
    }

    function isUrlLikely(u){ return /^https?:\/\//i.test(u||''); }
    function safeWebsite(u){ if(!u) return ''; return isUrlLikely(u)? u : `https://${u}`; }

    function computeLogoMarkup(p, category) {
      if (p.logo && /^https?:\/\//i.test(p.logo)) {
        return `<img src="${p.logo}" alt="${p.name||'logo'}" style="width:64px;height:64px;border-radius:50%;object-fit:cover;" />`;
      }
      return `<span aria-label="logo" role="img">${getCategoryIcon(category, p.name)}</span>`;
    }

    // SNF beds chip (only shows for skilled-nursing)
    function upsertBedChip(card, category, beds) {
      const body = card.querySelector('.provider-body');
      if (!body) return;
      if (category !== 'skilled-nursing' || !beds || !Number.isFinite(beds.total)) {
        const existing = card.querySelector('.bed-availability');
        if (existing) existing.remove();
        return;
      }
      const isLow = (Number(beds.available) || 0) < 10;
      const html = `
        <div class="bed-availability ${isLow ? 'low' : ''}">
          <span class="bed-icon">üõèÔ∏è</span>
          <span>${Number(beds.available || 0)} / ${Number(beds.total || 0)} Beds Available</span>
        </div>
      `;
      const existing = card.querySelector('.bed-availability');
      if (existing) existing.outerHTML = html;
      else body.insertAdjacentHTML('beforeend', html);
    }
function getBedsFromFields(p) {
  // Accept BOTH naming styles:
  // - "available", "occupied", "total"        (new style)
  // - "availableBeds", "occupiedBeds", "totalBeds" (old/app style)
  const aSource = (p.available ?? p.availableBeds);
  const oSource = (p.occupied ?? p.occupiedBeds);
  const tSource = (p.total ?? p.totalBeds);

  const a = Number(aSource);
  const o = Number(oSource);
  const t = Number(tSource);

  const any = [a, o, t].some(n => Number.isFinite(n));
  if (!any) return null;

  const clean = n => (Number.isFinite(n) ? n : 0);
  return {
    available: clean(a),
    occupied: clean(o),
    total: clean(t)
  };
}

    function getCategoryName(category) {
      const names = {
        'hospice':'Hospice Care',
        'skilled-nursing':'Skilled Nursing',
        'memory-care':'Memory Care',
        'board-and-care-facilities':'Board and Care Facilities',
        'palliative':'Palliative Care'
      };
      return names[category] || 'Healthcare Provider';
    }

    function createProviderCard(provider, providerId, category, beds) {
      const card = document.createElement('div');
      card.className = 'provider-card';
      card.setAttribute('data-firebase-id', providerId);
      card.setAttribute('data-name', (provider.name || '').toLowerCase());
      card.setAttribute('data-location', provider.location || '');
      card.setAttribute('data-category', category);

      const logoMarkup = computeLogoMarkup(provider, category);
      const website = safeWebsite(provider.website || '');

      card.innerHTML = `
        <div class="provider-header">
          <div class="provider-logo">${logoMarkup}</div>
          <h3>${provider.name || 'Provider Name'}</h3>
          <div class="location">üìç ${provider.location || 'Location not specified'}</div>
        </div>
        <div class="provider-body">
          <span class="provider-type-badge">${getCategoryIcon(category, provider.name)} ${getCategoryName(category)}</span>
          <div class="provider-description">${provider.description || 'Quality care services for your loved ones.'}</div>

          <div class="provider-info">
            ${provider.contact ? `<div>üë§ <strong>Contact:</strong> ${provider.contact}</div>`:''}
            ${provider.email ? `<div>üìß <strong>Email:</strong> <a href="mailto:${provider.email}" style="color:#00bcd4;">${provider.email}</a></div>`:''}
            ${(provider.website||'') ? `<div>üåê <strong>Website:</strong> <a href="${website}" target="_blank" rel="noopener" style="color:#00bcd4;">${(provider.website||'').replace(/^https?:\/\//,'')}</a></div>`:''}
          </div>

          <div class="provider-actions" style="margin-top:12px;display:flex;gap:10px;">
            <a
              href="${providerIsAllPeace(provider.name) ? 'reviews-allpeace.html' : `reviews.html?providerId=${encodeURIComponent(providerId)}&name=${encodeURIComponent(provider.name||'')}`}"
              class="btn btn-reviews"
            >üìñ Read Reviews</a>

            <a href="quick-signup.html?provider=${encodeURIComponent(providerId)}" class="btn btn-review">
              ‚úçÔ∏è Leave a Review
            </a>
          </div>
        </div>
      `;

      upsertBedChip(card, category, beds);
      return card;
    }

    // Main loader (live sync)
    function loadFirestoreProviders() {
      db.collection('providers')
        .where('status','==','approved')
        .onSnapshot(async (snapshot) => {
          resetTotals();

          const container = document.getElementById('providersGrid');

          // remove cards for docs that no longer exist
          const existingIds = new Set(snapshot.docs.map(d=>d.id));
          document.querySelectorAll('.provider-card').forEach(c=>{
            const id = c.getAttribute('data-firebase-id');
            if (id && !existingIds.has(id)) c.remove();
          });

          const jobs = snapshot.docs.map(async (docSnap) => {
            const raw = docSnap.data() || {};
            const providerId = docSnap.id;

            const provider = {
              name: raw.businessName || raw.name || '',
              location: raw.serviceArea || raw.location || '',
              description: raw.description || '',
              email: raw.email || '',
              website: raw.website || '',
              contact: raw.contactName || raw.contact || '',
              phone: raw.phone || '',
              logo: raw.logo || ''
            };

            const category = normalizeCategory(raw);
            const beds = getBedsFromFields(raw); // SNF chip only if numbers present

            let card = document.querySelector(`[data-firebase-id="${providerId}"]`);
            if (!card) {
              card = createProviderCard(provider, providerId, category, beds);
              container.appendChild(card);
            } else {
              // Update existing card quickly
              card.setAttribute('data-name', (provider.name || '').toLowerCase());
              card.setAttribute('data-location', provider.location || '');
              card.setAttribute('data-category', category);

              const title = card.querySelector('.provider-header h3');
              if (title) title.textContent = provider.name || 'Provider Name';

              const loc = card.querySelector('.provider-header .location');
              if (loc) loc.textContent = 'üìç ' + (provider.location || 'Location not specified');

              const logo = card.querySelector('.provider-logo');
              if (logo) logo.innerHTML = computeLogoMarkup(provider, category);

              const badge = card.querySelector('.provider-type-badge');
              if (badge) badge.innerHTML = `${getCategoryIcon(category, provider.name)} ${getCategoryName(category)}`;

              upsertBedChip(card, category, beds);
            }

            // Totals (beds only meaningful for SNF‚Äîstill tracked generically)
            if (category === 'skilled-nursing' && beds) bumpTotals(category, beds.available, beds.total);
            else bumpTotals(category, 0, 0);
          });

          await Promise.all(jobs);

          updateBannerFor(currentFilter);
          searchProviders(); // respect current search/filter on first paint
        });
    }

    window.addEventListener('DOMContentLoaded', loadFirestoreProviders);
  </script>
</body>
</html>
